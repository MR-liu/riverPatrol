我们使用supabase后端,现在部署在本地可以查看接口,SUPABASE_DATABASE_DOCUMENTATION.md是后端大概文档.我们现在准备接入接口.我们的策略是前端完全不直接交互supabase,而是通过nextjs api层进行,这样保证安全性.查看文档

默认密码: password哈希值: 9dfb6c0fe2cb6776ba923ccd7e23b6a77ab88bd38e9a34d774dd30db146e66ef加密方式: SHA256 +
salt('smart_river_salt')


按照这个模式,查看SUPABASE_DATABASE_DOCUMENTATION.md文档,用定义好的公共方法参考登录api我们接入权限系统,nextjs api以及前端都要接入

后端api的大致SUPABASE_DATABASE_DOCUMENTATION.md文档，具体的可以查看supabase下的表定义，我们的策略是前端完全不直接交互supabase,而是通过nextjs api层进行,这样保证安全性

lsof -i tcp:8081


我们现在开始接入API，我们查看supabase文件夹下的表定义，我们使用nextjs的api层作为中转，所以我们可以编写api文件放在api文件夹下，使用app+接口名的方式命名，我会收集转到nextjs项目区运行，然后app中调用
我们分四步来完成数据接入，第一步查看原来模块需要的数据以及定义，第二步查看supabase的表定义，要注意原来的RLS以及权限定义，第三步完成nextjs的api中转编写api文件放在api文件夹下，使用app+接口名的方式命名，我会收集转到nextjs项目区运行，第四步是咋app调用中转的接口

我们的整体逻辑是，我们有多个区域，是管理后台新增的。每个区域有一个区域管理，区域管理负责确认告警转工单，维护员完成之后返给区域管理确认，区域管理可以打回也可以确认，确认的话可以由监控中心或者管理员完单。


人工单子生成：                                                                                                                
                                                                                                                                 
     1. 人工提交单子告警产生                                                                                                     
        ↓                                                                                                                        
     2. 监控中心主管(R002)确认告警并创建工单也可以写理由退回                                                                     
        ↓                                                                                                                        
     3. 河道维护员主管(R006)接收工单                                                                                             
        ↓                                                                                                                        
     4. R006根据区域和团队情况分派工单                                                                                           
        ↓                                                                                                                        
     5. 河道维护员(R003)接收并处理工单                                                                                           
        ↓                                                                                                                        
     6. 河道巡检员(R004)现场确认                                                                                                 
        ↓                                                                                                                        
     7. R006审核工单完成情况                                                                                                     
        ↓                                                                                                                        
     8. R002进行最终审核                                                                                                         
                                                                                                                                 
                                                                                                                                 
   AI单子流程：                                                                                                                  
     1. 告警产生                                                                                                                 
        ↓                                                                                                                        
     2. 监控中心主管(R002)确认告警并创建工单也可以写理由退回                                                                     
        ↓                                                                                                                        
     3. 河道维护员主管(R006)接收工单                                                                                             
        ↓                                                                                                                        
     4. R006根据区域和团队情况分派工单                                                                                           
        ↓                                                                                                                        
     5. 河道维护员(R003)接收并处理工单                                                                                           
        ↓                                                                                                                        
     6. 河道巡检员(R004)现场确认                                                                                                 
        ↓                                                                                                                        
     7. R006审核工单完成情况                                                                                                     
                                             